- dLayout:
    Control: GroupContainer
    Variant: verticalAutoLayoutContainer
    Properties:
      DropShadow: =DropShadow.None
      Fill: =gblTheme.Background
      Height: =Parent.Height
      LayoutAlignItems: =LayoutAlignItems.Stretch
      LayoutDirection: =LayoutDirection.Vertical
      LayoutMode: =LayoutMode.Auto
      RadiusBottomLeft: =0
      RadiusBottomRight: =0
      RadiusTopLeft: =0
      RadiusTopRight: =0
      Width: =Parent.Width
    Children:
    - dCollect:
        Control: Classic/Button
        Properties:
          OnSelect: |-
            =/*Start*/
            Set(varLoading,{Visible: true, Value: 1, Text: "Loading"});

            /*Capture Local Date Selection*/
            UpdateContext({
                locEndDate: dEndDate.SelectedDate,
                locStartDate: dStartDate.SelectedDate
            });

            /*Collect Downtime*/
            Set(varLoading,{Visible: true, Value: 20, Text: "Collecting Downtime Data"});
            ClearCollect(colDowntime,
                ForAll(
                    Filter(Downtime,
                        Ended <= DateAdd(locEndDate, 23, TimeUnit.Hours),
                        Started >= DateAdd(locStartDate, -1, TimeUnit.Hours)
                    ),
                    {
                        Id: Value(ThisRecord.ID),
                        Shift: Text(ThisRecord.Shift_Letter),
                        Line: Text(ThisRecord.Line.Value),
                        Lot: Text(ThisRecord.Lot),
                        Catalog: Text(ThisRecord.Catalog),
                        Size: Text(ThisRecord.Size),
                        Started: DateTimeValue(ThisRecord.Started),
                        Ended: DateTimeValue(ThisRecord.Ended),
                        Reason: Text(ThisRecord.Reason.Value),
                        Total: Value(ThisRecord.Total_Downtime),
                        Comments: Text(ThisRecord.Comments)
                    }
                )
            );

            Select(dUpdate);
          Text: ="collect"
          AlignInContainer: =AlignInContainer.Start
          Visible: =false
    - dSequentialCollect:
        Control: Timer
        Properties:
          Text: =Text(Time(0, 0, Self.Duration/1000 - Self.Value/1000), "hh:mm:ss")
          AlignInContainer: =AlignInContainer.Start
          Visible: =false
    - dUpdate:
        Control: Classic/Button
        Properties:
          OnSelect: "=/*Update Code*/\nSet(varLoading,{Visible: true, Value: 20, Text: \"Updating\"});\n\n/*Clear collections for top downtime reasons*/\nClear(collectTopDowntime);\nClear(collectHasReason);\n\nUpdateContext({\n    locStartDate: dStartDate.SelectedDate,\n    locEndDate: dEndDate.SelectedDate\n});\n\n/*Create a Default filter*/\nUpdateContext({\n    locDefaultDowntimeFilter:\n        Filter(\n                collectDowntime,\n                And(\n                    started >= DateAdd(\n                        DateValue(locStartDate),\n                        -1,\n                        TimeUnit.Hours\n                    ),\n                    ended <= DateAdd(\n                        DateValue(locEndDate),\n                        23,\n                        TimeUnit.Hours\n                    )\n                ),\n                If(\n                    d_shift.Selected.Value = \"All\",\n                    shift = shift,\n                    shift = d_shift.Selected.Value\n                ),\n                If(\n                    d_line.Selected.Value = \"All\",\n                    line = line,\n                    line = d_line.Selected.Value\n                )\n            )\n});\n\n\n/*For all downtime reasons, collect the total sum of downtime, if downtime is greater than 0, add to has reason collection*/\nSet(varLoading,{Visible: true, Value: 40, Text: \"Collecting Downtime Sums\"});\nForAll(\n    collectDowntimeReasons,\n    If(\n        Sum(\n            Filter(\n                locDefaultDowntimeFilter,\n                reason = Downtime_Reason\n            ),\n            total\n        ) > 0,\n        Collect(\n            collectHasReason,\n            {Downtime_Reason: Downtime_Reason}\n        )\n    )\n);\n/*For all downtime that has an amount/reason, collect the total sum of downtime, sort by total amount*/\nSet(varLoading,{Visible: true, Value: 60, Text: \"Building Top Downtime List\"});\nForAll(\n    collectHasReason,\n    Collect(\n        collectTopDowntime,\n        {\n            Downtime_Reason: Downtime_Reason,\n            \n            Downtime_Total: Sum(\n                Filter(\n                    locDefaultDowntimeFilter,\n                    reason = Downtime_Reason\n                ),\n                total\n            ),\n            \n            Downtime_Comments:\n                Concat(\n                    Filter(\n                        locDefaultDowntimeFilter,\n                        !IsBlankOrError(comments),\n                        reason = Downtime_Reason\n                ),\n                    comments,\n                    \" ¶ \"\n                )\n        }\n    )\n);\n\n\n\n/*Clear for garbage collection*/\nSet(varLoading,{Visible: true, Value: 95, Text: \"Finishing Up\"});\n\nUpdateContext({\n    locDefaultDowntimeFilter: Blank()\n});\n\n/*End*/\nSet(varLoading,{Value: 100, Text: \"Completed\"});\nSet(varLoading,{Visible: false, Value: -1, Text: \"Not Loading\"});"
          Text: ="update"
          AlignInContainer: =AlignInContainer.Start
          Visible: =false
    - dHeader:
        Control: GroupContainer
        Variant: horizontalAutoLayoutContainer
        Properties:
          AlignInContainer: =AlignInContainer.SetByContainer
          DropShadow: =DropShadow.None
          Fill: =gblTheme.Primary
          LayoutAlignItems: =LayoutAlignItems.Stretch
          LayoutGap: =gblPadding
          LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
          LayoutMinHeight: =10
          LayoutMinWidth: =10
          LayoutMode: =LayoutMode.Auto
          PaddingBottom: =gblPadding
          PaddingLeft: =gblPadding
          PaddingRight: =gblPadding
          PaddingTop: =gblPadding
          RadiusBottomLeft: =0
          RadiusBottomRight: =0
          RadiusTopLeft: =0
          RadiusTopRight: =0
        Children:
        - dLogo:
            Control: Image
            Properties:
              Image: =If(gblTheme.Mode = "Light", logo1, logo2)
              LayoutMinHeight: =10
              Width: =dNavigationTitle.Width
        - dTitle:
            Control: Label
            Properties:
              Text: ="App Title"
              Color: =gblTheme.Text_Light
              FillPortions: =1
              LayoutMinHeight: =10
              LayoutMinWidth: =10
              Size: =Self.Height / 3
        - dMode:
            Control: Classic/Icon
            Variant: HalfFilledCircle
            Properties:
              OnSelect: =If(gblTheme.Mode = "Light", Set(gblTheme, gblThemeMode.Dark),Set(gblTheme, gblThemeMode.Light))
              Color: =gblTheme.Text_On_Dark
              Height: =10
              HoverColor: =gblTheme.Text_On_Light
              Icon: =Icon.HalfFilledCircle
              LayoutMinHeight: =10
              PaddingBottom: =4
              PaddingLeft: =4
              PaddingRight: =4
              PaddingTop: =4
              Rotation: =If(gblTheme.Mode = "Light", 0, 180)
              Width: =Self.Height
        - dBugs:
            Control: Image
            Properties:
              OnSelect: =Navigate(Bugs,ScreenTransition.Fade)
              Image: =gIcons.Bug
              HoverFill: =gblTheme.Pri_Complement
              ImagePosition: =ImagePosition.Fill
              LayoutMinHeight: =10
              PaddingLeft: =
              RadiusBottomLeft: =Self.Width
              RadiusBottomRight: =Self.RadiusBottomLeft
              RadiusTopLeft: =Self.RadiusBottomLeft
              RadiusTopRight: =Self.RadiusBottomLeft
              Width: =Self.Height
        - dUserImg:
            Control: Image
            Properties:
              Image: =User().Image
              Fill: =RGBA(0, 0, 0, 1)
              ImagePosition: =ImagePosition.Fill
              LayoutMinHeight: =10
              PaddingLeft: =
              RadiusBottomLeft: =Self.Width
              RadiusBottomRight: =Self.RadiusBottomLeft
              RadiusTopLeft: =Self.RadiusBottomLeft
              RadiusTopRight: =Self.RadiusBottomLeft
              Width: =Self.Height
    - dMain:
        Control: GroupContainer
        Variant: horizontalAutoLayoutContainer
        Properties:
          AlignInContainer: =AlignInContainer.SetByContainer
          DropShadow: =DropShadow.None
          FillPortions: =11
          LayoutAlignItems: =LayoutAlignItems.Stretch
          LayoutMinHeight: =10
          LayoutMinWidth: =10
          LayoutMode: =LayoutMode.Auto
          RadiusBottomLeft: =0
          RadiusBottomRight: =0
          RadiusTopLeft: =0
          RadiusTopRight: =0
        Children:
        - dNavigation:
            Control: GroupContainer
            Variant: verticalAutoLayoutContainer
            Properties:
              AlignInContainer: =AlignInContainer.SetByContainer
              DropShadow: =DropShadow.None
              Fill: =gblTheme.Midground
              LayoutAlignItems: =LayoutAlignItems.Stretch
              LayoutDirection: =LayoutDirection.Vertical
              LayoutGap: =gblPadding
              LayoutMinHeight: =10
              LayoutMinWidth: =10
              LayoutMode: =LayoutMode.Auto
              PaddingBottom: =gblPadding
              PaddingLeft: =gblPadding
              PaddingRight: =gblPadding
              PaddingTop: =gblPadding
              RadiusBottomLeft: =0
              RadiusBottomRight: =0
              RadiusTopLeft: =0
              RadiusTopRight: =0
            Children:
            - dNavigationTitle:
                Control: Label
                Properties:
                  Text: =App.ActiveScreen.Name
                  Align: =Align.Center
                  Color: =gblTheme.Text_On_Light
                  LayoutMinWidth: =10
                  Size: =Self.Height / 3
            - dNavigationSeparator:
                Control: Rectangle
                Properties:
                  Fill: =gblTheme.Pri_Complement
                  Height: =Round(gblPadding/2,0)
                  LayoutMinWidth: =10
                  Width: =10
            - dNavigationGallery:
                Control: Gallery
                Variant: galleryVertical
                Properties:
                  Items: =colNavigation
                  AlignInContainer: =AlignInContainer.SetByContainer
                  DelayItemLoading: =true
                  FillPortions: =3
                  Layout: =Layout.Vertical
                  LayoutMinHeight: =10
                  LayoutMinWidth: =10
                  LoadingSpinner: =LoadingSpinner.Data
                  TemplatePadding: =gblPadding
                  TemplateSize: =30
                Children:
                - dNavigationGalleryButton:
                    Control: Classic/Button
                    Properties:
                      OnSelect: =Navigate(ThisItem.Screen,ScreenTransition.Fade)
                      Text: =ThisItem.Label
                      BorderThickness: =1
                      Color: =gblTheme.Text_Dark
                      DisplayMode: =If(App.ActiveScreen.Name = ThisItem.Screen.Name, DisplayMode.Disabled, DisplayMode.Edit)
                      Fill: =gblTheme.Accent
                      FontWeight: =FontWeight.Normal
                      Height: =Parent.TemplateHeight
                      RadiusBottomLeft: =100
                      RadiusBottomRight: =100
                      RadiusTopLeft: =100
                      RadiusTopRight: =100
                      Size: =Self.Height / 4
                      Width: =Parent.TemplateWidth
            - dNavigationFooter:
                Control: Label
                Properties:
                  Text: |-
                    =
                    "MilliporeSigma is the U.S. and Canada Life Science business of Merck KGaA, Darmstadt, Germany."
                    &Char(13)&Char(13)&
                    "© 2025 EMD Millipore. All rights reserved."
                  Align: =Align.Center
                  Color: =gblTheme.Text_On_Light
                  FillPortions: =1
                  Height: =200
                  LayoutMinWidth: =10
                  Size: =Self.Height / 24
                  VerticalAlign: =VerticalAlign.Bottom
        - dFilterParent:
            Control: GroupContainer
            Variant: verticalAutoLayoutContainer
            Properties:
              AlignInContainer: =AlignInContainer.SetByContainer
              DropShadow: =DropShadow.None
              Fill: =gblTheme.Background
              LayoutAlignItems: =LayoutAlignItems.Stretch
              LayoutDirection: =LayoutDirection.Vertical
              LayoutGap: =gblPadding
              LayoutMinHeight: =10
              LayoutMinWidth: =10
              LayoutMode: =LayoutMode.Auto
              PaddingBottom: =gblPadding
              PaddingLeft: =gblPadding
              PaddingRight: =gblPadding
              PaddingTop: =gblPadding
              RadiusBottomLeft: =0
              RadiusBottomRight: =0
              RadiusTopLeft: =0
              RadiusTopRight: =0
            Children:
            - dFilters:
                Control: GroupContainer
                Variant: verticalAutoLayoutContainer
                Properties:
                  AlignInContainer: =AlignInContainer.SetByContainer
                  Fill: =gblTheme.Foreground
                  Height: =Parent.Height * 0.5
                  LayoutAlignItems: =LayoutAlignItems.Stretch
                  LayoutDirection: =LayoutDirection.Vertical
                  LayoutGap: =gblPadding
                  LayoutMinHeight: =10
                  LayoutMinWidth: =10
                  LayoutMode: =LayoutMode.Auto
                  PaddingBottom: =gblPadding
                  PaddingLeft: =gblPadding
                  PaddingRight: =gblPadding
                Children:
                - dFilterTitle:
                    Control: Label
                    Properties:
                      Text: ="Filters"
                      Align: =Align.Center
                      AlignInContainer: =AlignInContainer.Center
                      Color: =gblTheme.Text_Light
                      Fill: =gblTheme.Secondary
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                      Width: =Parent.Width
                - dStartDateLabel:
                    Control: Label
                    Properties:
                      Text: ="Start Date"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dStartDate:
                    Control: Classic/DatePicker
                    Properties:
                      BorderThickness: =1
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      FocusedBorderThickness: =1
                      IconBackground: =gblTheme.Sec_Complement
                      IconFill: =gblTheme.Text_On_Light
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dEndDateLabel:
                    Control: Label
                    Properties:
                      Text: ="End Date"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dEndDate:
                    Control: Classic/DatePicker
                    Properties:
                      BorderThickness: =1
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      FocusedBorderThickness: =1
                      IconBackground: =gblTheme.Sec_Complement
                      IconFill: =gblTheme.Text_On_Light
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dFilterButton:
                    Control: Classic/Button
                    Properties:
                      OnSelect: =Select(dCollect);
                      Text: ="Update Date Range"
                      Color: =gblTheme.Text_Dark
                      Fill: =gblTheme.Accent
                      FillPortions: =1
                      FontWeight: =FontWeight.Normal
                      HoverColor: =RGBA(255, 255, 255, 1)
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Round(Self.Height/4,0)
                - dFilterSeparator0:
                    Control: Rectangle
                    Properties:
                      Fill: =gblTheme.Pri_Complement
                      Height: =Round(gblPadding/2,0)
                      LayoutMinWidth: =10
                      Width: =10
                - dShiftLabel:
                    Control: Label
                    Properties:
                      Text: ="Shift"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dShift:
                    Control: Classic/DropDown
                    Properties:
                      Items: =gblLists.Shifts
                      ChevronBackground: =gblTheme.Sec_Complement
                      ChevronFill: =gblTheme.Text_Dark
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dFilterSeparator1:
                    Control: Rectangle
                    Properties:
                      Fill: =gblTheme.Pri_Complement
                      Height: =Round(gblPadding/2,0)
                      LayoutMinWidth: =10
                      Width: =10
                - dLineLabel:
                    Control: Label
                    Properties:
                      Text: ="Line"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dLine:
                    Control: Classic/DropDown
                    Properties:
                      Items: =gblLists.Lines
                      ChevronBackground: =gblTheme.Sec_Complement
                      ChevronFill: =gblTheme.Text_Dark
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dFilterSeparator2:
                    Control: Rectangle
                    Properties:
                      Fill: =gblTheme.Pri_Complement
                      Height: =Round(gblPadding/2,0)
                      LayoutMinWidth: =10
                      Width: =10
                - dReasonLabel:
                    Control: Label
                    Properties:
                      Text: ="Reason"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dReason:
                    Control: Classic/DropDown
                    Properties:
                      Items: =false
                      ChevronBackground: =gblTheme.Sec_Complement
                      ChevronFill: =gblTheme.Text_Dark
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dFilterSeparator3:
                    Control: Rectangle
                    Properties:
                      Fill: =gblTheme.Pri_Complement
                      Height: =Round(gblPadding/2,0)
                      LayoutMinWidth: =10
                      Width: =10
                - dSortLabel:
                    Control: Label
                    Properties:
                      Text: ="Sort By:"
                      Align: =Align.Center
                      Color: =gblTheme.Text_On_Light
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 4
                - dSortBy:
                    Control: Classic/DropDown
                    Properties:
                      Items: =["Line", "Shift", "Time", "Minutes Down"]
                      ChevronBackground: =gblTheme.Sec_Complement
                      ChevronFill: =gblTheme.Text_Dark
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
                - dSortOrder:
                    Control: Classic/DropDown
                    Properties:
                      Items: =["Ascending", "Descending"]
                      ChevronBackground: =gblTheme.Sec_Complement
                      ChevronFill: =gblTheme.Text_Dark
                      Color: =gblTheme.Text_On_Light
                      Fill: =gblTheme.Background
                      FillPortions: =1
                      LayoutMinHeight: =5
                      LayoutMinWidth: =10
                      Size: =Self.Height / 5
        - dBody:
            Control: GroupContainer
            Variant: verticalAutoLayoutContainer
            Properties:
              AlignInContainer: =AlignInContainer.SetByContainer
              DropShadow: =DropShadow.None
              FillPortions: =If(App.Width < Index(App.SizeBreakpoints,3).Value, 6, 10)
              LayoutAlignItems: =LayoutAlignItems.Stretch
              LayoutGap: =gblPadding
              LayoutMinHeight: =10
              LayoutMinWidth: =10
              LayoutMode: =LayoutMode.Auto
              LayoutOverflowY: =LayoutOverflow.Scroll
              PaddingBottom: =gblPadding
              PaddingLeft: =gblPadding
              PaddingRight: =gblPadding
              PaddingTop: =gblPadding
              RadiusBottomLeft: =0
              RadiusBottomRight: =0
              RadiusTopLeft: =0
              RadiusTopRight: =0
            Children:
            - dTopDowntime:
                Control: GroupContainer
                Variant: verticalAutoLayoutContainer
                Properties:
                  AlignInContainer: =AlignInContainer.SetByContainer
                  DropShadow: =DropShadow.Semilight
                  FillPortions: =1.5
                  LayoutAlignItems: =LayoutAlignItems.Stretch
                  LayoutDirection: =LayoutDirection.Vertical
                  LayoutMinHeight: =1
                  LayoutMinWidth: =1
                  LayoutMode: =LayoutMode.Auto
                  Visible: =locShowTop
                Children:
                - dTopDowntimeTotalTitle:
                    Control: Label
                    Properties:
                      Text: ="Total Downtime"
                      Align: =Align.Center
                      Color: =varColor5
                      Fill: =varColor2
                      FillPortions: =1
                      Font: =Font.Verdana
                      Height: =Parent.Height
                      LayoutMinHeight: =10
                      LayoutMinWidth: =10
                      Size: =Self.Height / 3
                      Width: =Parent.Width
                - dTopDowntimeTotal:
                    Control: Label
                    Properties:
                      Text: =Sum(collectTopDowntime, Downtime_Total) & " Minutes"
                      Align: =Align.Center
                      Color: =varColor0
                      Fill: =varColor4
                      FillPortions: =1
                      Font: =Font.Verdana
                      Height: =Parent.Height
                      LayoutMinHeight: =10
                      LayoutMinWidth: =10
                      Size: =Self.Height / 3.5
                      Width: =Parent.Width
                - d_c_t_header:
                    Control: GroupContainer
                    Variant: manualLayoutContainer
                    Properties:
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DropShadow: =DropShadow.None
                      Fill: =varColor2
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      RadiusBottomLeft: =0
                      RadiusBottomRight: =0
                      RadiusTopLeft: =0
                      RadiusTopRight: =0
                      Width: =Parent.Width
                    Children:
                    - d_c_t_h_title:
                        Control: Label
                        Properties:
                          Text: ="Top Downtime Reasons"
                          Align: =Align.Center
                          Color: =varColor5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          Size: =Self.Height / 3
                          Width: =Parent.Width
                - d_c_t_columns:
                    Control: GroupContainer
                    Variant: manualLayoutContainer
                    Properties:
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DropShadow: =DropShadow.None
                      Fill: =varColor3
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      RadiusBottomLeft: =0
                      RadiusBottomRight: =0
                      RadiusTopLeft: =0
                      RadiusTopRight: =0
                      Width: =Parent.Width
                    Children:
                    - d_c_t_c_amount:
                        Control: Label
                        Properties:
                          Text: ="Downtime Amount"
                          Align: =Align.Center
                          Color: =varColor5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          Size: =Self.Width / 14
                          Width: =Parent.Width / 2
                          X: =d_c_t_c_reason.X + d_c_t_c_reason.Width
                    - d_c_t_c_reason:
                        Control: Label
                        Properties:
                          Text: ="Downtime Reason"
                          Align: =Align.Center
                          Color: =varColor5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          Size: =Self.Width / 14
                          Width: =Parent.Width / 2
                - d_c_t_gallery:
                    Control: Gallery
                    Variant: galleryVertical
                    Properties:
                      Items: =Sort(collectTopDowntime, Downtime_Total, SortOrder.Descending)
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DelayItemLoading: =true
                      FillPortions: =10
                      Layout: =Layout.Vertical
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      LoadingSpinner: =LoadingSpinner.Data
                      TemplatePadding: =0
                      TemplateSize: =Self.Height / 10
                    Children:
                    - d_c_t_g_amount:
                        Control: Label
                        Properties:
                          OnSelect: =Select(Parent)
                          Text: =ThisItem.Downtime_Total
                          Align: =Align.Center
                          Font: =Font.Verdana
                          Height: =Parent.TemplateHeight - d_c_t_g_seperator.Height
                          Size: =Self.Width / 14
                          Width: =Parent.TemplateWidth/2
                          X: =d_c_t_g_reason.X + d_c_t_g_reason.Width
                          Y: =1-1
                    - d_c_t_g_reason:
                        Control: Label
                        Properties:
                          OnSelect: =Select(Parent)
                          Text: =ThisItem.Downtime_Reason
                          Align: =Align.Center
                          Font: =Font.Verdana
                          Height: =Parent.TemplateHeight - d_c_t_g_seperator.Height
                          Size: =Self.Width / 14
                          Width: =Parent.TemplateWidth/2
                          X: =1-1
                          Y: =1-1
                    - d_c_t_g_seperator:
                        Control: Rectangle
                        Properties:
                          OnSelect: =Select(Parent)
                          Fill: =varColor1
                          Height: =Parent.TemplateHeight * 0.025
                          Width: =Parent.Width
                          Y: =Parent.TemplateHeight - Self.Height
                - d_c_t_copy:
                    Control: Classic/Button
                    Properties:
                      OnSelect: |-
                        =IfError(
                            Copy(
                                Concat(
                                    FirstN(
                                        Sort(
                                            collectTopDowntime,
                                            Downtime_Total,
                                            SortOrder.Descending
                                            ),
                                        6
                                        ),
                                    Downtime_Reason & Char(9) & Downtime_Total & Char(9) & Downtime_Comments,
                                    Char(13)
                                )
                            ),
                            Notify("Cannot copy data from new Teams, or other embeded tools. Please open this app in a web browser to copy items.", NotificationType.Error)
                        );

                        If(
                            dLine.Selected.Value = "All",
                            Notify("Cannot copy Downtime for all lines together. Please select one Line at a time." , NotificationType.Information),
                            dShift.Selected.Value = "All",
                            Notify("Cannot copy Downtime for all shifts together. Please select one Shift at a time." , NotificationType.Information),
                            Notify("Copied top downtime for " & dLine.Selected.Value, NotificationType.Success)
                        );
                      Text: ="Copy Downtime for DOR"
                      Color: =varColor0
                      Fill: =varColorAccent
                      FillPortions: =2
                      Font: =Font.Verdana
                      HoverColor: =varColor5
                      HoverFill: =ColorFade(Self.Fill, -50%)
                      LayoutMinHeight: =0
                      LayoutMinWidth: =1
                      RadiusBottomLeft: =4
                      RadiusBottomRight: =4
                      RadiusTopLeft: '=4   '
                      RadiusTopRight: '=4   '
                      Size: =Self.Width / 24
                      Width: =Parent.Width
            - dDowntime:
                Control: GroupContainer
                Variant: verticalAutoLayoutContainer
                Properties:
                  AlignInContainer: =AlignInContainer.SetByContainer
                  DropShadow: =DropShadow.Semilight
                  FillPortions: =If(locShowTop, 5.5, 7.5)
                  LayoutAlignItems: =LayoutAlignItems.Stretch
                  LayoutDirection: =LayoutDirection.Vertical
                  LayoutMode: =LayoutMode.Auto
                Children:
                - d_c_d_header:
                    Control: GroupContainer
                    Variant: manualLayoutContainer
                    Properties:
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DropShadow: =DropShadow.None
                      Fill: =varColor2
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      RadiusBottomLeft: =0
                      RadiusBottomRight: =0
                      RadiusTopLeft: =0
                      RadiusTopRight: =0
                    Children:
                    - d_c_d_h_title:
                        Control: Label
                        Properties:
                          Text: |-
                            =If(
                                And(
                                    d_shift.Selected.Value = "All",
                                    d_line.Selected.Value = "All"
                                ),
                                "All Downtime",
                                d_shift.Selected.Value = "All",
                                d_shift.Selected.Value & " " & d_line.Selected.Value & " Downtime",
                                d_line.Selected.Value & " " & d_shift.Selected.Value & " Shift Downtime"

                            )
                          Align: =Align.Center
                          Color: =varColor5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          Size: =Self.Height / 2
                          Width: =Parent.Width
                    - d_c_d_h_view:
                        Control: Classic/Button
                        Properties:
                          OnSelect: =UpdateContext({locShowTop:!locShowTop});
                          Text: |-
                            =If(
                                locShowTop,
                                "Hide Top Downtime",
                                "Show Top Downtime"
                            )
                          Color: =varColor0
                          Fill: =varColorAccent
                          Font: =Font.Verdana
                          Height: =Parent.Height * 0.80
                          HoverColor: =varColor5
                          HoverFill: =ColorFade(Self.Fill, -50%)
                          Size: =Self.Width / 16
                          Width: =Parent.Width * 0.15
                          X: =Parent.Width * 0.01
                          Y: =Parent.Height/2 - Self.Height/2
                    - d_c_d_h_add:
                        Control: Classic/Button
                        Properties:
                          OnSelect: |-
                            =Set(varDowntimeMode, FormMode.New);
                            Navigate(Modify_Downtime);
                          Text: ="Add Downtime"
                          Color: =varColor0
                          Fill: =varColorAccent
                          Font: =Font.Verdana
                          Height: =Parent.Height * 0.80
                          HoverColor: =varColor5
                          HoverFill: =ColorFade(Self.Fill, -50%)
                          Size: =Self.Width / 16
                          Width: =Parent.Width * 0.15
                          X: =Parent.Width * 0.99 - Self.Width
                          Y: =Parent.Height/2 - Self.Height/2
                - d_c_d_columns:
                    Control: GroupContainer
                    Variant: horizontalAutoLayoutContainer
                    Properties:
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DropShadow: =DropShadow.None
                      Fill: =varColor3
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      LayoutMode: =LayoutMode.Auto
                      RadiusBottomLeft: =0
                      RadiusBottomRight: =0
                      RadiusTopLeft: =0
                      RadiusTopRight: =0
                    Children:
                    - d_c_d_c_line:
                        Control: Label
                        Properties:
                          Text: ="Line"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 8
                          Width: =Parent.Width / 10
                          X: =d_c_d_c_shift.X + d_c_d_c_shift.Width
                    - d_c_d_c_shift:
                        Control: Label
                        Properties:
                          Text: ="Shift"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =0.5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =d_c_d_c_line.Size * 0.95
                          Width: =(Parent.Width / 10) * 0.5
                    - d_c_d_c_time:
                        Control: Label
                        Properties:
                          Text: ="Time"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 8
                          Width: =Parent.Width / 10
                          X: =d_c_d_c_shift.X + d_c_d_c_shift.Width
                    - d_c_d_c_catalog:
                        Control: Label
                        Properties:
                          Text: ="Catalog"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 8
                          Width: =Parent.Width / 10
                          X: =d_c_d_c_line.X + d_c_d_c_line.Width * 1
                    - d_c_d_c_lot:
                        Control: Label
                        Properties:
                          Text: ="Lot"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 8
                          Width: =Parent.Width / 10
                          X: =d_c_d_c_line.X + d_c_d_c_line.Width * 2
                    - d_c_d_c_total:
                        Control: Label
                        Properties:
                          Text: ="Minutes Down"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 10
                          Width: =Parent.Width / 10
                          X: =d_c_d_c_reason.X + d_c_d_c_reason.Width
                    - d_c_d_c_reason:
                        Control: Label
                        Properties:
                          Text: ="Reason"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =1
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =Self.Width / 8
                          Width: =(Parent.Width / 10) * 1.5
                          X: =d_c_d_c_line.X + d_c_d_c_line.Width * 5
                    - d_c_d_c_comments:
                        Control: Label
                        Properties:
                          Text: ="Comments"
                          Align: =Align.Center
                          Color: =varColor5
                          FillPortions: =2.5
                          Font: =Font.Verdana
                          Height: =Parent.Height
                          LayoutMinWidth: =1
                          Size: =d_c_d_c_line.Size
                          Width: =(Parent.Width / 10) * 2
                          X: =d_c_d_c_total.X + d_c_d_c_total.Width
                - d_c_d_gallery:
                    Control: Gallery
                    Variant: galleryVertical
                    Properties:
                      OnSelect: |-
                        =Set(varDowntimeID, d_c_d_gallery.Selected.id);
                        Set(varDowntimeMode, FormMode.Edit);
                        Navigate(Modify_Downtime);
                      Items: "=SortByColumns(\r\n    Filter(\r\n        collectDowntime,\r\n        started >= DateAdd(locStartDate, -1, TimeUnit.Hours),\r\n        If(\r\n            d_shift.Selected.Value = \"All\",\r\n            shift = shift,\r\n            shift = d_shift.Selected.Value\r\n            ),\r\n        If(\r\n            d_line.Selected.Value = \"All\",\r\n            line = line,\r\n            line = d_line.Selected.Value\r\n            ),\r\n        If(\r\n            IsBlank(d_reason.Selected.Downtime_Reason),\r\n            reason = reason,\r\n            reason = d_reason.Selected.Downtime_Reason\r\n            )\r\n    ),\r\n    \r\n    Switch(\r\n        d_sort_by.Selected.Value,\r\n        \"Line\",\r\n        \"line\",\r\n        \"Shift\",\r\n        \"shift\",\r\n        \"Time\",\r\n        \"ended\",\r\n        \"Minutes Down\",\r\n        \"total\"\r\n    ),\r\n    \r\n    Switch(\r\n        d_sort_order.Selected.Value,\r\n        \"Ascending\",\r\n        SortOrder.Ascending,\r\n        \"Descending\",\r\n        SortOrder.Descending,\r\n        SortOrder.Ascending\r\n    )\r\n\r\n)"
                      AlignInContainer: =AlignInContainer.SetByContainer
                      DelayItemLoading: =true
                      FillPortions: =12
                      Layout: =Layout.Vertical
                      LayoutMinHeight: =1
                      LayoutMinWidth: =1
                      LoadingSpinner: =LoadingSpinner.Data
                      TemplatePadding: =0
                      TemplateSize: =Self.Height / 10
                    Children:
                    - d_c_d_g_parent:
                        Control: GroupContainer
                        Variant: horizontalAutoLayoutContainer
                        Properties:
                          Height: =Parent.TemplateHeight - d_c_d_g_seperator.Height
                          LayoutMode: =LayoutMode.Auto
                          Width: =Parent.TemplateWidth
                        Children:
                        - d_c_d_g_line:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.line
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =1
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: =Self.Width / 8
                              Width: =Parent.Width / 10
                              X: =d_c_d_g_shift.X + d_c_d_g_shift.Width
                        - d_c_d_g_shift:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.shift
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =0.5
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: =d_c_d_g_line.Size
                              Width: =(Parent.Width / 10) * 0.5
                        - d_c_d_g_time:
                            Control: GroupContainer
                            Variant: verticalAutoLayoutContainer
                            Properties:
                              DropShadow: =DropShadow.None
                              LayoutDirection: =LayoutDirection.Vertical
                              LayoutMinHeight: =1
                              LayoutMinWidth: =1
                              LayoutMode: =LayoutMode.Auto
                              RadiusBottomLeft: =0
                              RadiusBottomRight: =0
                              RadiusTopLeft: =0
                              RadiusTopRight: =0
                            Children:
                            - d_c_d_g_t_start:
                                Control: Label
                                Properties:
                                  OnSelect: =Select(d_c_d_gallery);
                                  Text: =TimeValue(ThisItem.started)
                                  Align: =Align.Center
                                  Color: =varColor0
                                  FillPortions: =1
                                  Font: =Font.Verdana
                                  Height: =Parent.Height
                                  LayoutMinHeight: =1
                                  LayoutMinWidth: =1
                                  Size: =Self.Width / 8
                                  Width: =Parent.Width
                                  X: =d_c_d_g_shift.X + d_c_d_g_shift.Width
                            - d_c_d_g_t_end:
                                Control: Label
                                Properties:
                                  OnSelect: =Select(d_c_d_gallery);
                                  Text: =TimeValue(ThisItem.ended)
                                  Align: =Align.Center
                                  Color: =varColor0
                                  Fill: =varColor4
                                  FillPortions: =1
                                  Font: =Font.Verdana
                                  Height: =Parent.Height
                                  LayoutMinHeight: =1
                                  LayoutMinWidth: =1
                                  Size: =Self.Width / 8
                                  Width: =Parent.Width
                                  X: =d_c_d_g_shift.X + d_c_d_g_shift.Width
                        - d_c_d_g_catalog:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.catalog
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =1
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: =Self.Width / 12
                              Width: =Parent.Width / 10
                              X: =d_c_d_g_line.X + d_c_d_g_line.Width * 1
                        - d_c_d_g_lot:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.lot
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =1
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: =Self.Width / 12
                              Width: =Parent.Width / 10
                              X: =d_c_d_g_line.X + d_c_d_g_line.Width * 2
                        - d_c_d_g_total:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.total
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =1
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: =Self.Width / 8
                              Width: =Parent.Width / 10
                              X: =d_c_d_g_reason.X + d_c_d_g_reason.Width
                        - d_c_d_g_reason:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.reason
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =1
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Size: |-
                                =If(
                                    Len(Self.Text) <= 20,
                                    Self.Width / 12,
                                    Self.Width / (Len(Self.Text)*0.50)
                                )
                              Width: =(Parent.Width / 10) * 1.5
                              X: =d_c_d_g_line.X + d_c_d_g_line.Width * 5
                        - d_c_d_g_comments:
                            Control: Label
                            Properties:
                              OnSelect: =Select(d_c_d_gallery);
                              Text: =ThisItem.comments
                              Align: =Align.Center
                              Color: =varColor0
                              FillPortions: =2.5
                              Font: =Font.Verdana
                              Height: =Parent.Height
                              LayoutMinWidth: =1
                              Overflow: =Overflow.Scroll
                              Size: =d_c_d_g_catalog.Size
                              Width: =(Parent.Width / 10) * 2
                              X: =d_c_d_g_total.X + d_c_d_g_total.Width
                    - d_c_d_g_seperator:
                        Control: Rectangle
                        Properties:
                          OnSelect: =Select(Parent)
                          Fill: =varColor1
                          Height: =Parent.TemplateHeight * 0.025
                          Width: =Parent.Width
                          Y: =Parent.TemplateHeight - Self.Height
